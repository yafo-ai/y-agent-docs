---
title: 分身
---

分身是一种把 单个 提示词拆分成 多个提示词的技术。类似于孙悟空，拔毛分身成多个，然后同时做不同的事情。

拆分好的提示词，相当于多个分身，会并发的调用大模型。

<Callout type="info"> 
**分身**（拆分任务）的好处：
- 减少模型推理时间，提升效率。
- 让模型专注某一个任务，减少干扰，提升准确率。
</Callout>

因为大模型节点可以配置以下任务：
- 使用工具。
- 自动选择下游角色。
- 输出参数。

所有分身最多会有三个。同时分身功能和ReAct是互斥的。

具体案例，可以查看Y-Agent框架安装好，自带的案例。

提示词会被安装如下方式处理：

```python   tab="[未开启时，提示词被合并在一起]"
使用工具计算用户的输入，同时向模型2传达再次复查的指令。

用户输入：五百除以123

所有计算必须使用工具，不要输出其他指令。
注意：工具指令不可篡改，不可遗漏，必须以command=|<|开始，以|>|结束。

calculator 工具介绍： 计算器工具，用于执行数学表达式。。
calculator 工具指令：command=|<|calculator(expression="填写要计算的数学表达式")|>|


write_var 工具介绍：用于将答案/结果/输出内容存储到特殊的位置。
write_var 工具指令：command=|<|write_var(num1='用户问题里的第一个数',num2='用户问题里的第2个数')|>|

可选角色列表：
| 角色 | 角色职责 |
|-|-|
| 大模型_2 | 2 |
| 执行器 | 用于通过模板直接执行系统函数，可以通过jinja模板编写处理逻辑 |


assignment 工具介绍：用于从“可选角色列表”中筛选出适宜的角色，进行处理下一步任务。
assignment 工具指令：command=|<|assignment(next_roles=[{"role":"填写选择的角色","message":"填写角色的任务内容"},{"role":"填写选择的角色","message":"填写角色的任务内容"}])|>|



```

```python   tab="[开启后-使用工具分身]"
使用工具计算用户的输入，同时向模型2传达再次复查的指令。

用户输入：五百除以123

所有计算必须使用工具，不要输出其他指令。
注意：工具指令不可篡改，不可遗漏，必须以command=|<|开始，以|>|结束。

calculator 工具介绍： 计算器工具，用于执行数学表达式。。
calculator 工具指令：command=|<|calculator(expression="填写要计算的数学表达式")|>|




```


```python   tab="[选择角色分身]"
使用工具计算用户的输入，同时向模型2传达再次复查的指令。

用户输入：五百除以123

所有计算必须使用工具，不要输出其他指令。
注意：工具指令不可篡改，不可遗漏，必须以command=|<|开始，以|>|结束。

可选角色列表：
| 角色 | 角色职责 |
|-|-|
| 大模型_2 | 2 |
| 执行器 | 用于通过模板直接执行系统函数，可以通过jinja模板编写处理逻辑 |


assignment 工具介绍：用于从“可选角色列表”中筛选出适宜的角色，进行处理下一步任务。
assignment 工具指令：command=|<|assignment(next_roles=[{"role":"填写选择的角色","message":"填写角色的任务内容"},{"role":"填写选择的角色","message":"填写角色的任务内容"}])|>|



```

```python   tab="[填写变量分身]"
使用工具计算用户的输入，同时向模型2传达再次复查的指令。

用户输入：五百除以123

所有计算必须使用工具，不要输出其他指令。
注意：工具指令不可篡改，不可遗漏，必须以command=|<|开始，以|>|结束。

write_var 工具介绍：用于将答案/结果/输出内容存储到特殊的位置。
write_var 工具指令：command=|<|write_var(num1='用户问题里的第一个数',num2='用户问题里的第2个数')|>|



```

> 以上分身是同时运行的，这样既保证速度，效果又好。缺点是，浪费token。
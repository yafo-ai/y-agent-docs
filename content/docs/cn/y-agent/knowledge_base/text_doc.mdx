---
title: 文档型知识库
description: 知识库管理
---
## 介绍
文档型知识库，只支持Markdown格式的文档。

其他格式会被自动转成Markdown格式。

系统内置的分块策略是按照一级标题和二级标题进行分块。

## 如何创建 文档知识库
## 1. 新建文档库
新建知识库比较简单，点击上面的`新建`按钮，填写好相应的信息即可，唯一需要说明的是`标签`，

知识库标签可以不填，也可以填写一个或多个标签，标签用于对知识库进行分类，作用是在查询的时候可以作为过滤条件。

标签的填写方式，输入你希望的标签，然后回车，每次回车会添加一个新的标签。

关于查询时候的作用，请参考 [知识库工具](/docs//docs/y-agent/work_flow/wf_nodes/df_tool_node).

> 注意：当查询的时候，标签会作为查询条件，但是没有标签的知识库，也会被查询到。

## 2. 手工录入



直接录入知识库文档，只需在知识库管理页面点击“新建文档”按钮，选择手工录入。

要求填写文档名称

由于服务器会在本地存放一份文档原文，文档的名称就是服务器本地文件的名称，因此文档名称不能重复。


#### 填写文档内容

文档使用Markdown格式，请妥善组织文档的结构，尤其是一级标题和二级标题的层级关系。

文档切块的规则
![](./imgs/doc-chunk.png)

> 注意：文档内可以有多个一级标题，每个一级标题也会被单独切分。



#### AI整理
编写好的文档，可以点击“AI整理”按钮，让AI对文档进行重新编写，提高文档的质量。

AI整理的提示词需要自行编写。格式如下：`{{context_str}}` 代表原文的的内容。
```python

已知内容如下：
    ------------------------
    {{context_str}}
    ------------------------
    您是一个知识库编辑，将上面的内容转换为Markdown格式，必须符合以下几点要求
        此处输入你的要求。。。
```




#### 保存文档
保存：只保存文档，但是不添加到向量库。未添加到向量库的文档，在查询的不会被查到。

保存并同步向量库：保存并添加到向量库。

向量库操作：
文档在保存之后，可以手工再添加到向量库，操作按钮位于文档列表界面。

已经添加到向量库的文档，可以手工从向量库中删除，或者更新。修改后的文档，但是未更新向量库，系统会有提示。


#### 文档的版本管理

文档具有版本管理，再编辑文档界面，可以查看历史版本。


#### 查看文档切块

在文档列表界面，可以查看文档的切块效果。

## 3. 上传文件导入

上传文件导入知识库，只需在知识库管理页面点击“导入文档”按钮，选择文件，系统会自动将文件内容导入到知识库。

上传成功后，需要返回文档列表界面，翻到最后一页，即可看到新导入的文档。

上传成功的文档，建议查看编辑修正后，再添加到向量库。其操作和手工添加的过程一样。

## 向量库操作

单独更新向量库，上面已经提到。

批量更新向量库，是一个批量操作，通常是更换向量库存储位置，重新向量化所有已经向量的文档。

批量更新，只会更新之前已经添加到向量库的文档。之前未向量化的文档，不会被添加到向量库。

> 注意：如果手工直接操作向量库，将其中的文档删除，或者移除了向量库，系统不会自动标记为未向量化。

## 其他功能
### 向量检测

向量检测，用于测试向量查询的功能。

有两个位置可以进行向量检测：

- 向量库的顶部 `向量检测` 按钮
- 知识库页签的 `测试` 按钮

使用方式相同：
选择你需要查询的知识库，设置Top_K，输入检测内容，就是要查询的 query 然后点击 `检测` 按钮，查看返回的文档和评分。

### 调整类目

调整类目用于将某一分类的文档，批量移动到另一分类。

如果需要单独调整某一篇文档，请在文档编辑界面修改分类。